<!doctype html>
<html>
<head>
  <title>Build Focus</title>
  <link rel="stylesheet" href="styles/main.css" />
  <link rel="icon" href="/images/icon-32.png">
</head>
<body>
  <main style="display: none" data-bind="visible: true, css: { faded: warningPopupShown }">
    <a href="/main.html">
      <div class="logo">
        <img src="/images/logo.png" />
      </div>
    </a>

    <!-- Div that exists purely to mark the approximate position of the browser action button (for tours) -->
    <div class="browser-action-standin" style="position: absolute; top: 0; right: 30px"></div>

    <nav>
      <a href="/main.html" class="active home-button">
        Home
      </a>
      <a href="/options.html" class="settings-button">
        Settings
      </a>
    </nav>

    <section class="city-and-buttons">
      <h2 class="failed-tag" data-bind="if: failed">FAILED</h2>

      <div class="city" data-bind="render: { source: renderCity, afterRender: onPageLoaded }"></div>

      <div class="controls">
        <button class="startPomodoro"
                data-bind="click: startPomodoro, enable: canStartPomodoro">
          Focus
        </button>

        <button class="takeABreak"
                data-bind="click: startBreak, enable: canStartBreak">
          Take a break

          <small data-bind="if: failed && failingUrl">
            <br/>
            (at <span data-bind="text: failingDomain"></span>)
          </small>
        </button>

        <button class="notNow"
                data-bind="click: notNow, enable: canSayNotNow">
          Not now
        </button>

        <div class="overlay" data-bind="css: overlayStyle, if: overlayShown">
          <div class="overlay-text" data-bind="text: overlayText"></div>
          <div class="overlay-timer" data-bind="duration: timeRemaining">0:30</div>
        </div>
      </div>
    </section>
  </main>

  <div class="warning-modal" style="display: none" data-bind="visible: warningPopupShown">
    <h2>Look out!</h2>
    <p>
      <strong>You've started focusing, but you have distracting pages that are already open.</strong>
    </p>
    <p>
      Build Focus can close these for you if you'd like, or you can keep them open as
      they are (but make sure you don't open them!)
    </p>
    <div class="warning-buttons">
      <button class="close-distractions" data-bind="click: closeDistractingTabs">
        Close them
      </button>
      <button class="leave-distractions" data-bind="click: leaveDistractingTabs">
        Leave them
      </button>
    </div>
  </div>

  <script src="bower_components/requirejs/require.js"></script>
  <script src="scripts/config/base-config.js"></script>
  <script src="scripts/pages/main-page-binding.js"></script>
</body>
</html>